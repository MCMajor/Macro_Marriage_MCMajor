---
title: "R Notebook"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Ctrl+Shift+Enter*. 

```{r}
#install necessary packages and libraries 
install.packages(stringr)
library(tidyverse)
library(stringr)
library(dplyr)
library(purrr)
```


```{r}
# Create framework to concatenate csv files
paste0("../Data/ss",01,"pak.csv")
```


```{r}
# Create integer atomic vector for sequence of years
Censusyears <- c(01:24)
Censusyears
```


```{r}
# pad vector with 0 to the left(default) to ensure all single digit files have a "0" to the left to ensure all files are called with no error
census_timeframes <- str_pad(Censusyears, width = 2, pad = "0")
census_timeframes
```
```{r}
census_timeframes %>% map(\(x) read_csv(paste0("../data/ss",x,"pak.csv")))
```


```{r}
# Create Variable for census csv files
# use map function to create a place holder for paste0 function for all integers of the vector to call all csv files for each year
# only include columns that we want to keep as dataset is large and needs 
census_person <- census_timeframes %>% map(\(x) read_csv(paste0("../data/ss",x,"pak.csv")) %>% select(.,
                                                    SERIALNO,
                                                    AGEP,
                                                    SEX,
                                                    RAC1P,
                                                    PINCP,
                                                    SCHL,
                                                    MAR,
                                                    OCCP,
                                                    SOCP) %>%
                                             mutate(across(everything(), as.character)) %>% 
                                                    mutate(YEAR = x,
                                                           .before = PINCP))
census_person
```


```{r}
total_census_2001_2024 <- bind_rows(census_person)
total_census_2001_2024
```


```{r}
total_census_2001_2024 <- total_census_2001_2024 %>%
  mutate(across(c(AGEP,PINCP), as.numeric))
total_census_2001_2024
```
```{r}
total_census_2001_2024 <- total_census_2001_2024 %>% 
  mutate(SEX = case_when(
    SEX == "1" ~ "Male",
    SEX == "2" ~ "Female",
  )) %>% mutate(RAC1P = case_when(
    RAC1P == "1" ~ "White",
    RAC1P == "2" ~ "Black or African American",
    RAC1P == "3" ~ "American Indian",
    RAC1P == "4" ~ "Alaska Native",
    RAC1P == "5" ~ "American Indian/Alaska Native tribes specified",
    RAC1P == "6" ~ "Asian",
    RAC1P == "7" ~ "Native Hawaiian/Pacific Islander",
    RAC1P == "8" ~ "Other",
    RAC1P == "9" ~ "Two or More Races"
  )) %>% mutate(SCHL = case_when(
    SCHL == "1" ~ "No schooling completed",
    SCHL == "2" ~ "Preschool",
    SCHL == "3" ~ "Kindergarten",
    SCHL == "4" ~ "Grade 1",
    SCHL == "5" ~ "Grade 2",
    SCHL == "6" ~ "Grade 3",
    SCHL == "7" ~ "Grade 4",
    SCHL == "8" ~ "Grade 5",
    SCHL == "9" ~ "Grade 6",
    SCHL == "10" ~ "Grade 7",
    SCHL == "11" ~ "Grade 8",
    SCHL == "12" ~ "Grade 9",
    SCHL == "13" ~ "Grade 10",
    SCHL == "14" ~ "Grade 11",
    SCHL == "15" ~ "Grade 12 (no diploma)",
    SCHL == "16" ~ "High school diploma",
    SCHL == "17" ~ "GED",
    SCHL == "18" ~ "less than 1 year of college",
    SCHL == "19" ~ "1+ years of college credit",
    SCHL == "20" ~ "Associate's degree",
    SCHL == "21" ~ "Bachelor's degree",
    SCHL == "22" ~ "Master's degree",
    SCHL == "23" ~ "Professional degree beyond a bachelor's degree",
    SCHL == "24" ~ "Doctorate degree",
  ))
total_census_2001_2024
```


Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Ctrl+Alt+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Ctrl+Shift+K* to preview the HTML file).

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.
